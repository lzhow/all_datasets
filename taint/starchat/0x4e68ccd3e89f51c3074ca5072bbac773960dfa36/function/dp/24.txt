
The contract has a function called `Flash` that is called when a user wants to swap two tokens. In this function, the user specifies the amount of each token they want to exchange, and the `unswapV2FlashCalback` function is then called. This function takes in three parameters: `uint24 fee`, `address recipient`, and `bytes callData`. The `recipient` parameter is used to specify the recipient of the swapped tokens, while the other two parameters are used for the actual swapping logic.

In the body of `swap`, the program checks if the liqudity of Uniswaps is greater than 2^119-1. If it is, it calculates the fees for each of token0 and token1 using the formula `fee = amount * feePercentage / 65536`. It then calculates `amountWithFee` by adding the fee to the specified amount. It also calculates a new liquidity by subtracting the old liqiudity from the new amount with fee. Finally, if `tokenAmountIn` is not  zero, then it calls `safeTranferFrom` on `IERC20(fromToken)` to transfer the tokens